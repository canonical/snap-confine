summary: snap-confine honors SNAP_CONFINE_DEBUG environment variable
execute: |
    for value in yes no 0 1 unicorn; do
        SNAP_CONFINE_DEBUG=$value ubuntu-core-launcher snap.SNAP_NAME.APP_NAME snap.SNAP_NAME.APP_NAME command 2>debug.$value || :
    done
    grep -F -q 'DEBUG: security tag is snap.SNAP_NAME.APP_NAME' debug.yes
    grep -F -q 'DEBUG: security tag is snap.SNAP_NAME.APP_NAME' debug.1
    grep -F -v -q 'DEBUG: security tag is snap.SNAP_NAME.APP_NAME' debug.no
    grep -F -v -q 'DEBUG: security tag is snap.SNAP_NAME.APP_NAME' debug.0
    grep -F -q 'WARNING: unrecognized value of environment variable SNAP_CONFINE_DEBUG (expected yes/no or 1/0)' debug.unicorn
restore: |
    rm -f debug.*
